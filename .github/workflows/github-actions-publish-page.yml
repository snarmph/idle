name: Publish Page
run-name: ${{ github.actor }} is publishing changes to github pages
on: [push]
permissions:
  contents: write
jobs:
  publish-page:
    runs-on: ubuntu-latest
    steps:
      - name: Check out dev branch
        uses: actions/checkout@v4
        with:
          ref: dev
      - name: Copy files to temporary dir
        run: |
          cp -r page/* ${{ runner.temp }}/
      - name: Checkout master branch
        uses: actions/checkout@v4
        with:
          ref: master
      - name: Copy files from temporary directory to master
        run: |
          cp -r ${{ runner.temp }}/* .
      - name: commit and push changes to master
        run: |
          git config --global user.email "snarmph@gmail.com"
          git config --global user.name "snarmph"
          git add .
          git commit -m "Publish page from dev branch"
          git push origin master